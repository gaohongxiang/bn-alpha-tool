# 空投数据管理功能 - 需求文档

## 功能概述

基于Prisma Studio的空投数据管理架构，通过统一的数据导入/导出脚本和只读API接口，实现空投数据的高效管理和展示。系统支持两种空投类型（Alpha和TGE），并提供实时倒计时和历史数据分析功能。

## 需求详述

### 需求1：数据展示和查看功能

**用户故事：** 作为用户，我希望能够查看完整的空投历史数据和当前进行中的空投信息，以便了解空投趋势和及时参与空投活动。

#### 验收标准

1. **WHEN** 用户访问空投页面 **THEN** 系统应该显示当前进行中的空投信息卡片
2. **WHEN** 有当前空投时 **THEN** 系统应该显示实时倒计时和进度条
3. **WHEN** 用户切换到数据表格视图 **THEN** 系统应该显示完整的历史空投数据表格
4. **WHEN** 用户切换到历史曲线视图 **THEN** 系统应该显示积分门槛和收益的趋势图表
5. **WHEN** 系统加载数据失败 **THEN** 应该显示友好的错误提示信息

### 需求2：两种空投类型的数据展示

**用户故事：** 作为用户，我需要能够区分两种不同类型的空投（Alpha和TGE），并看到不同类型空投的特定信息展示。

#### 验收标准

1. **WHEN** 空投类型为Alpha **THEN** 系统应该显示蓝色的Alpha标签
2. **WHEN** 空投类型为TGE **THEN** 系统应该显示紫色的TGE标签
3. **WHEN** 空投为两阶段类型 **THEN** 系统应该显示优先获取和先到先得两个积分门槛
4. **WHEN** 空投为单阶段类型 **THEN** 系统应该只显示一个积分门槛
5. **WHEN** 空投为免费领取 **THEN** 系统应该显示"🎁 免费领取"标识

### 需求3：实时倒计时和状态管理

**用户故事：** 作为用户，我希望看到当前空投的实时倒计时和状态信息，以便及时参与空投活动。

#### 验收标准

1. **WHEN** 空投未开始 **THEN** 系统应该显示"未开始"状态和灰色进度条
2. **WHEN** 空投在优先获取阶段 **THEN** 系统应该显示蓝色进度条和"优先获取阶段"标识
3. **WHEN** 空投在先到先得阶段 **THEN** 系统应该显示橙色进度条和"先到先得阶段"标识
4. **WHEN** 空投已结束 **THEN** 系统应该显示"已结束"状态和红色进度条
5. **WHEN** 空投为日期格式 **THEN** 系统应该显示"今日开放"而不是具体倒计时

### 需求4：数据导入导出功能

**用户故事：** 作为管理员，我希望能够通过命令行工具导入和导出空投数据，以便进行数据备份和批量管理。

#### 验收标准

1. **WHEN** 管理员运行导入命令 **THEN** 系统应该从最新的备份文件导入数据到数据库
2. **WHEN** 管理员运行导出命令 **THEN** 系统应该将数据库数据导出为JSON备份文件
3. **WHEN** 管理员运行列表命令 **THEN** 系统应该显示所有可用的备份文件信息
4. **WHEN** 导入过程中遇到重复数据 **THEN** 系统应该跳过重复记录并显示统计信息
5. **WHEN** 导入导出过程中发生错误 **THEN** 系统应该显示详细的错误信息和解决建议

### 需求5：数据完整性和一致性

**用户故事：** 作为系统管理员，我需要确保空投数据的完整性和一致性，防止数据冲突和不一致的状态。

#### 验收标准

1. **WHEN** 系统导入数据 **THEN** 应该确保token字段的唯一性约束
2. **WHEN** 数据格式不正确 **THEN** 系统应该进行数据清理和格式转换
3. **WHEN** 数据库连接失败 **THEN** 系统应该显示连接错误和解决方案
4. **WHEN** 数据验证失败 **THEN** 系统应该记录错误并继续处理其他数据
5. **WHEN** 导入完成 **THEN** 系统应该显示详细的统计信息和最新记录

### 需求6：Prisma Studio数据管理

**用户故事：** 作为管理员，我希望通过Prisma Studio进行直观的数据库管理，以便高效地添加、编辑和删除空投数据。

#### 验收标准

1. **WHEN** 管理员启动Prisma Studio **THEN** 系统应该提供图形化的数据库管理界面
2. **WHEN** 管理员在Prisma Studio中修改数据 **THEN** 前端应用应该能够实时获取最新数据
3. **WHEN** 管理员添加新的空投记录 **THEN** 系统应该验证必填字段和数据格式
4. **WHEN** 管理员删除空投记录 **THEN** 系统应该确保数据一致性
5. **WHEN** 数据库模式发生变化 **THEN** 系统应该通过Prisma迁移保持数据完整性

### 需求7：响应式设计和用户体验

**用户故事：** 作为用户，我希望能够在不同设备上流畅地查看空投信息，包括桌面端、平板和手机。

#### 验收标准

1. **WHEN** 用户在桌面端使用 **THEN** 界面应该显示完整的表格和图表信息
2. **WHEN** 用户在平板上使用 **THEN** 界面应该自适应屏幕尺寸并保持可读性
3. **WHEN** 用户在手机上使用 **THEN** 表格应该支持横向滚动，图表应该适配小屏幕
4. **WHEN** 用户在小屏幕设备上查看 **THEN** 文字和按钮应该有足够的大小
5. **WHEN** 用户使用触摸设备 **THEN** 所有交互元素应该有适当的触摸目标大小