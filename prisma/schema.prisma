// Prisma Schema for BN Alpha Tool
// 空投数据管理系统数据库模型

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// 空投数据模型
model Airdrop {
  id                  Int      @id @default(autoincrement())
  date                String   // 空投日期，如 "2025年04月28日"
  token               String   @unique // 代币名称，如 "SIGN"
  points              Int      // 积分门槛
  participants        Int?     // 参与人数，可为空
  amount              Float    // 空投数量
  supplementaryToken  Float    // 补充代币数量
  currentPrice        String?  // 当前价格，如 "$0.063"
  type                AirdropType // 空投类型：alpha 或 tge
  cost                Float?   // TGE项目的成本（可选）
  pointsConsumed      Boolean  @default(true) // 是否消耗积分，默认为true

  // 时间字段（仅当status为current或upcoming时需要）
  startTime           String?  // 开始时间，格式: "2025-06-19 20:00 (UTC+8)"
  endTime             String?  // 结束时间，格式: "2025-06-12 10:00 (UTC+8)"

  // 两阶段空投字段
  phase1Points        Int?     // 优先获取阶段积分门槛
  phase2Points        Int?     // 先到先得阶段积分门槛
  phase1EndTime       String?  // 优先获取阶段结束时间
  phase2EndTime       String?  // 先到先得阶段结束时间

  description         String?  // 描述信息

  // 时间戳
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  @@map("airdrops")
}

// 空投类型枚举
enum AirdropType {
  alpha
  tge
}
